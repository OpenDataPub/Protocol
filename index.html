<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <title>OpenDataPub</title>
  <script src='https://www.w3.org/Tools/respec/respec-w3c-common' class='remove'></script>
  <script class='remove'>
    var respecConfig = {
      specStatus: "ED",
      editors: [{
        name: "Jan Werder",
        url: "",
      }],
      github: "https://github.com/OpenDataPub/Protocol",
      shortName: "jawerd",
      localBiblio:  {
        "HTTP-Signatures": {
          title:    "Signing HTTP Messages",
          href:     "https://tools.ietf.org/html/draft-cavage-http-signatures",
          authors:  [
            "M. Cavage",
            "M. Sporny",
          ],
        }
      }
    }
  </script>
    <style>
      thead {
        background: #005A9C;
        color: white;
      }
      thead th {
        font-weight: normal;
      }
      table, td, th { border: 1px solid gray }
      table { width: 120% ;}
      td {
        vertical-align: top;
        padding: 5px;
      }
  .nanotabs > ul li { float:left; list-style:none; }
  .nanotabs > ul li a { display:block; padding:4px 6px; margin-right: 3px; border-left: 1px solid #b9ab2d; border-right: 1px solid #b9ab2d; border-top: 1px solid #b9ab2d; border-collapse: collapse; background:#fcfaee; color:#b9ab2d; font-family: sans-serif;
   text-decoration:none; }
  .nanotabs > ul li a:hover { background:#FFFCE5; color:#550; }
  .nanotabs > ul li a.selected { background:#555; color:#FFF; }
    </style>
</head>

<body>
  <section id='abstract'>
    <p>
      The OpenDataPub protocol is a decentralised networking protocol for
      open data platforms based upon the <a href="https://w3c.github.io/activitypub/">ActivityPub</a> protcol in
      combination with the <a href="https://joinup.ec.europa.eu/solution/dcat-application-profile-data-portals-europe">DCAT-AP</a>
      open data standard of the EU.
    </p>
  </section>
  <section id='sotd'>
    <p>
      This document is a proposed submission.
    </p>
  </section>

  <section id="Overview">
    <h2><span class="secno">1. </span>Overview</h2>
  </section>

  <section id="conformance">
  </section>

  <section id="vocabulary-specification">
    <h2 role="heading" aria-level="1" id="vocab-spec">Vocabulary specification</h2>

    <section id="Dataset">
    <h3 role="heading" aria-level="2" id="dataset">Dataset</h3>
    <p>Datasets are a central component of any Open Data Platform. Datasets
      provide context to the actual data, which they carry as an Resource.
      (ActivityPub: Object)
    </p>

    <p>
      Dataset objects <em class="rfc2119" title="MUST">MUST</em> have the following properties:
    </p>

    <dt id="title-property">title</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_title">
        <code>Dataset</code></a>
        <code>dct:title</code>
        <p>This property contains a name given to the Dataset.</p>
        <p>Range: dfs:Literal (1..n)</p>
    </dd>

    <dt id="description-property">description</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_description">
        <code>Dataset</code></a>
        <code>dct:description</code>
        <p>This property contains a free-text account of the Dataset.</p>
        <p>Range: dfs:Literal (1..n)</p>
    </dd>

    <dt id="description-id">id</dt>
    <dd>
      A new field by OpenDataPub.
        <code>Dataset</code></a>
        <code>odp:id</code>
        <p>This property contains an unique identifier across the whole web. This is an URL in combination with the dataset id.</p>
        <p>Range: dfs:Literal (1..1)</p>
    </dd>

    <dt id="description-activity">activity</dt>
    <dd>
      A new field by OpenDataPub.
        <code>Dataset</code></a>
        <code>odp:activity</code>
        <p>This property contains a numeric value, that shows wheter this is a creation, deletion or an update.</p>
        <p>Range: xsd:nonNegativeInteger (1..1)</p>
    </dd>

    <p>
      Dataset objects <em class="rfc2119" title="SHOULD">SHOULD</em> have the following properties:
    </p>

    <dt id="keyword-property">keyword/tag</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_keyword">
      <code>Dataset</code></a>
      <code>dcat:keyword</code>
      <p>This property contains a keyword or tag describing the Dataset.</p>
      <p>Range: rdfs:Literal (0..n)</p>
    </dd>

    <dt id="contactPoint-property">contact point</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_contactPoint">
      <code>Dataset</code></a>
      <code>dcat:contactPoint</code>
      <p>This property contains contact information that can be used for sending comments about the Dataset.</p>
      <p>Range: vcard:Kind (0..n)</p>
    </dd>

    <dt id="distribution-property">dataset distribution</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_distribution">
      <code>Dataset</code></a>
      <code>dcat:distribution</code>
      <p>This property links the Dataset to an available Distribution.</p>
      <p>Range: dcat:Distribution (0..n)</p>
    </dd>

    <dt id="publisher-property">publisher</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_publisher">
      <code>Dataset</code></a>
      <code>dct:publisher</code>
      <p>This property refers to an entity (organisation) responsible for making the Dataset available.</p>
      <p>Range: foaf:Agent (0..1)</p>
    </dd>    

    <dt id="theme-property">theme/catagory</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_theme">
      <code>Dataset</code></a>
      <code>dcat:theme</code>
      <p>This property refers to a category of the Dataset. A Dataset may be associated with multiple themes.</p>
      <p>Range: skos:Concept (0..n)</p>
    </dd>

    <p>
      Dataset objects <em class="rfc2119" title="MAY">MAY</em> have the following properties:
    </p>

    <dt id="issued-property">release date</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_issued">
        <code>Dataset</code></a>
        <code>dct:issued</code>
        <p>This property contains the date of formal issuance (e.g., publication) of the Dataset.</p>
        <p>Range: rdfs:Literal typed as xsd:date or xsd:dateTime (0..1)</p>
    </dd>

    <dt id="modified-property">update/modification date</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_modified">
        <code>Dataset</code></a>
        <code>dct:modified</code>
        <p>This property contains the most recent date on which the Dataset was changed or modified.</p>
        <p>Range: rdfs:Literal typed as xsd:date or xsd:dateTime (0..1)</p>
    </dd>

    <dt id="language-property">language</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_language">
      <code>Dataset</code></a>
      <code>dct:language</code>
      <p>This property refers to a language of the Dataset.</p>
      <p>Range: dct:LinguisticSystem (0..n)</p>
    </dd>


    <dt id="accrualPeriodicity-property">frequency</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_accrualPeriodicity">
      <code>Dataset</code></a>
      <code>dct:accrualPeriodicity</code>
      <p>This property refers to the frequency at which the Dataset is updated.</p>
      <p>Range: dct:Frequency (0..1)</p>
    </dd>

    <dt id="identifier-property">identifier</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_identifier">
      <code>Dataset</code></a>
      <code>dct:identifier</code>
      <p>This property contains the main identifier for the Dataset, e.g. the URI or other unique identifier in the context of the Catalog.</p>
      <p>Range: rdfs:Literal (0..n)</p>
    </dd>

    <dt id="spatial-property">spatial/geographical coverage</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_spatial">
      <code>Dataset</code></a>
      <code>dct:spatial</code>
      <p>This property refers to a geographic region that is covered by the Dataset.</p>
      <p>Range: dct:Location (0..n)</p>
    </dd>

    <dt id="temporal-property">temporal coverage</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_temporal">
      <code>Dataset</code></a>
      <code>dct:temporal</code>
      <p>This property refers to a temporal period that the Dataset covers.</p>
      <p>Range: dct:PeriodOfTime (0..n)</p>
    </dd>

    <dt id="landingPage-property">landing page</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:dataset_landingPage">
      <code>Dataset</code></a>
      <code>dcat:landingPage</code>
      <p>This property refers to a web page that provides access to the Dataset, 
        its Distributions and/or additional information. It is intended to point 
        to a landing page at the original data provider, not to a page on a site 
        of a third party, such as an aggregator.</p>
      <p>Range: foaf:Document (0..n)</p>
    </dd>

    <dt id="accessRights-property">access rights</dt>
    <dd>
      A reference to an [[DCAT-AP]]
      <a href="">
      <code>Dataset</code></a>
      <code>dct:accessRights</code>
      <p>This property refers to information that indicates whether the Dataset is 
        open data, has access restrictions or is not public. A controlled vocabulary 
        with three members (:public, :restricted, :non-public) will be created and 
        maintained by the Publications Office of the EU.</p>
      <p>Range: dct:RightsStatement (0..1)</p>
    </dd>

    <dt id="conformsTo-property">conforms to</dt>
    <dd>
      A reference to an [[DCAT-AP]]
      <a href="">
      <code>Dataset</code></a>
      <code>dct:conformsTo</code>
      <p>This property refers to an implementing rule or other specification.</p>
      <p>Range: dct:Standard (0..n)</p>
    </dd>

    <dt id="Documentation-property">Documentation</dt>
    <dd>
      A reference to an [[DCAT-AP]]
      <a href="">
      <code>Dataset</code></a>
      <code>foaf:page</code>
      <p>This property refers to a page or document about this Dataset.</p>
      <p>Range: foaf:Document (0..n)</p>
    </dd>

    <dt id="isVersionOf-property">is Version Of</dt>
    <dd>
      A reference to an [[DCAT-AP]]
      <a href="">
      <code>Dataset</code></a>
      <code>dct:isVersionOf</code>
      <p>This property refers to a related Dataset of which the described Dataset is a version, edition, or adaptation.</p>
      <p>Range: dcat:Dataset (0..n)</p>
    </dd>

    <dt id="otherIdentifier-property">otherIdentifier</dt>
    <dd>
      A reference to an [[DCAT-AP]]
      <a href="">
      <code>Dataset</code></a>
      <code>adms:identifier</code>
      <p>This property refers to a secondary identifier of the Dataset, such as MAST/ADS, DataCite, DOI, EZID or W3ID.</p>
      <p>Range: adms:Identifier (0..n)</p>
    </dd>

    <dt id="provenance-property">provenance</dt>
    <dd>
      A reference to an [[DCAT-AP]]
      <a href="">
      <code>Dataset</code></a>
      <code>dct:provenance</code>
      <p>This property contains a statement about the lineage of a Dataset.</p>
      <p>Range: dct:ProvenanceStatement (0..n)</p>
    </dd>

    <dt id="relatedresource-property">related resource</dt>
    <dd>
      A reference to an [[DCAT-AP]]
      <a href="">
      <code>Dataset</code></a>
      <code>dct:relation</code>
      <p>This property refers to a related resource.</p>
      <p>Range: rdfs:Resource (0..n)</p>
    </dd>

    <dt id="sample-property">sample</dt>
    <dd>
      A reference to an [[DCAT-AP]]
      <a href="">
      <code>Dataset</code></a>
      <code>adms:sample</code>
      <p>This property refers to a sample distribution of the dataset.</p>
      <p>Range: dcat:Distribution (0..n)</p>
    </dd>

    <dt id="source-property">source</dt>
    <dd>
      A reference to an [[DCAT-AP]]
      <a href="">
      <code>Dataset</code></a>
      <code>dct:source</code>
      <p>This property refers to a related Dataset from which the described Dataset is derived.</p>
      <p>Range: dcat:Dataset (0..n)</p>
    </dd>

    <dt id="type-property">type</dt>
    <dd>
      A reference to an [[DCAT-AP]]
      <a href="">
      <code>Dataset</code></a>
      <code>dct:type</code>
      <p>This property refers to the type of the Dataset. A controlled vocabulary for the values has not been established.</p>
      <p>Range: skos:Concept (0..1)</p>
    </dd>

    <dt id="version-property">version</dt>
    <dd>
      A reference to an [[DCAT-AP]]
      <a href="">
      <code>Dataset</code></a>
      <code>owl:versionInfo</code>
      <p>This property contains a version number or other version designation of the Dataset.</p>
      <p>Range: rdfs:Literal (0..1)</p>
    </dd>

    <dt id="versionnotes-property">version notes</dt>
    <dd>
      A reference to an [[DCAT-AP]]
      <a href="">
      <code>Dataset</code></a>
      <code>adms:versionNotes</code>
      <p>This property contains a description of the differences between this 
        version and a previous version of the Dataset.</p>
      <p>Range: rdfs:Literal (0..n)</p>
    </dd>

    <pre class="example highlight xml">
        <xmp>
          <dcat:Dataset rdf:about="https://www.govdata.de/web/guest/suchen/-/details/naturraume-geest-und-marsch3">
            <!-- must -->
            <dct:title xml:lang="de">Naturräume Geest und Marsch</dct:title>
            <dct:description xml:lang="de">Die Zuordnung des Hamburger Stadtgebietes zu den Naturräumen Geest und Marsch wird dargestellt. Die Karte ist auch als Hilfskarte für den Kontext -Einbau Ersatzbaustoffe- zu verstehen. Hier gibt es unterschiedliche Richtlinien je nachdem, ob ein Bauvorhaben in bzw. auf Geest- oder Marsch-Boden geplant ist. Die Daten werden als WMS-Darstellungsdienst und als WFS-Downloaddienst bereitgestellt.</dct:description> 
            <odp:id>https://ckan.govdata.de/dataset/1a6c005a-75ba-4527-85eb-992dbd08b320</odp:id>
            <!-- should -->
            <dcat:keyword xml:lang="de">Bodenschutz</dcat:keyword>
            <dcat:keyword xml:lang="de">Geodaten</dcat:keyword>
            <dcat:keyword xml:lang="de">Grundwasser</dcat:keyword>
            <dcat:keyword xml:lang="de">hmbtg</dcat:keyword>
            <dcat:keyword xml:lang="de">hmbtg_09_geodaten</dcat:keyword>
            <dcat:keyword xml:lang="de">Karte</dcat:keyword>
            <dcat:keyword xml:lang="de">opendata</dcat:keyword>
            <dcat:keyword xml:lang="de">Thematische Karte</dcat:keyword>
            <dcat:keyword xml:lang="de">Umwelt und Klima</dcat:keyword>
            <dcat:contactPoint>
              <vcard:Individual>
                <vcard:fn>Herr Dr. Michael Schröder</vcard:fn>
                <vcard:hasEmail rdf:resource="mailto:michael.schroeder@bue.hamburg.de"/>
                <vcard:hasTelephone rdf:parseType="Resource">
                  <vcard:hasValue rdf:resource="tel:+4940428403494"/>
                  <rdf:type rdf:resource="http://www.w3.org/2006/vcard/ns#Home"/>
                  <rdf:type rdf:resource="http://www.w3.org/2006/vcard/ns#Voice"/>
                </vcard:hasTelephone>
              </vcard:Individual>
            </dcat:contactPoint>
            <dcat:distribution rdf:resource="http://geodienste.hamburg.de/HH_WFS_Grundwasserschutz?SERVICE=WFS&amp;VERSION=1.1.0&amp;REQUEST=GetFeature&amp;typename=BSU_Z_Grundwasserschutz:Geest-_Marsch"/>
            <dcat:distribution rdf:resource="http://geodienste.hamburg.de/HH_WFS_Grundwasserschutz?REQUEST=GetCapabilities&amp;SERVICE=WFS"/>
            <dcat:distribution rdf:resource="http://geodienste.hamburg.de/HH_WMS_Grundwasserschutz?REQUEST=GetCapabilities&amp;SERVICE=WMS"/>
            <dcat:distribution rdf:resource="http://daten-hamburg.de/umwelt_klima/naturraeume_geest_und_marsch/Naturraeume_Geest_und_Marsch_HH_2017-02-20.zip"/>
            <dcat:distribution rdf:resource="http://metaver.de/trefferanzeige?docuuid=4635D337-4805-4C32-A211-13F8C038BF27"/>
            <dct:publisher>
              <foaf:Agent rdf:about="http://www.hamburg.de/bue/">
                <foaf:name>Behörde für Umwelt und Energie (BUE), Amt für Umweltschutz</foaf:name>
                <dct:type rdf:resource="http://purl.org/adms/publishertype/LocalAuthority"/>
                <odp:id>https://ckan.govdata.de/agent/N229dfea990bb44c8836accb82fd1047b</odp:id>
              </foaf:Agent>
            </dct:publisher>
            <dcat:theme rdf:resource="http://publications.europa.eu/resource/authority/data-theme/ENVI"/>
            <dcat:theme rdf:resource="http://publications.europa.eu/resource/authority/data-theme/AGRI"/>
            <!-- may -->
            <dct:issued rdf:datatype="http://www.w3.org/2001/XMLSchema#date">2017-02-27</dct:issued>
            <dct:language rdf:resource="http://publications.europa.eu/resource/authority/language/DEU"/>
            <dct:accrualPeriodicity rdf:resource="http://publications.europa.eu/resource/authority/frequency/ANNUAL"/>
            <adms:identifier>4635D337-4805-4C32-A211-13F8C038BF27</adms:identifier>
            <dct:spatial>
                    <gml:Envelope gml:srsName="http://www.opengis.net/def/crs/EPSG/0/4326"> 
                    <gml:lowerCorner>-10.58 34.56</gml:lowerCorner>
                    <gml:upperCorner>34.50 70.40</gml:upperCorner> 
                    </gml:Envelope>
                </dct:spatial>
            <dct:spatial>
            <dct:temporal>
              <dct:PeriodOfTime>
                <schema:startDate rdf:datatype="http://www.w3.org/2001/XMLSchema#date">2016-01-01</schema:startDate>
                <schema:endDate rdf:datatype="http://www.w3.org/2001/XMLSchema#date">2016-12-31</schema:endDate>
              </dct:PeriodOfTime>
            </dct:temporal>
            <dcat:landingPage rdf:resource="https://www.govdata.de/web/guest/daten/-/details/naturraume-geest-und-marsch3"/>
            <dct:accessRights>public</dct:accessRights>
            <dct:conformsTo rdf:resource="http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"/>
            <foaf:page rdf:resource="http://metaver.de/trefferanzeige?docuuid=4635D337-4805-4C32-A211-13F8C038BF27"/>
            <dct:isVersionOf rdf:resource="https://www.govdata.de/web/guest/suchen/-/details/naturraume-geest-und-marsch2"/>
            <adms:identifier>docID344</adms:identifier>
            <dct:provenance>MDK/c71a34e1-bf96-44d8-8020-5ebb0c7012a3</dct:provenance>
            <dct:relation rdf:resource="http://www.hamburg.de/grundwasser/;jsessionid=2955D422DF427EF0F3DBCA0E67239DC7.liveWorker2"/>
            <adms:sample>Referenz auf Beispieldatenstruktur</adms:sample>
            <dct:source rdf:resource="http://originalportal.de/source/"/>
            <dct:type rdf:resource=""/> <!-- TODO -->
            <owl:versionInfo>2.0</owl:versionInfo>
		        <adms:versionNotes>Teilweise geänderte Fassung</adms:versionNotes>
        </xmp>
    </pre>

  </section>

    <section id="Catalog">
    <h3 role="heading" aria-level="2" id="catalog">Catalog</h3>
    <p>A Catalog is an object to group different datasets.
      (ActivityPub: Object)
    </p>
    
    <p>
      Catalog objects <em class="rfc2119" title="MUST">MUST</em> have the following properties:
    </p>

    <dt id="title-property">title</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:catalog_title">
        <code>Catalog</code></a>
        <code>dct:title</code>
        <p>This property contains a name given to the Catalog.</p>
        <p>Range: dfs:Literal (1..n)</p>
    </dd>

    <dt id="description-property">description</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:catalog_description">
        <code>Catalog</code></a>
        <code>dct:description</code>
        <p>This property contains a free-text account of the Catalog.</p>
        <p>Range: dfs:Literal (1..n)</p>
    </dd>

    <dt id="publisher-property">publisher</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:catalog_publisher">
        <code>Catalog</code></a>
        <code>dct:publisher</code>
        <p>This property refers to an entity (organisation) responsible for making the Catalog available.</p>
        <p>Range: foaf:Agent (1..1)</p>
    </dd>

    <dt id="dataset-property">dataset</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:catalog_dataset">
        <code>Catalog</code></a>
        <code>dct:dataset</code>
        <p>This property links the Catalog with a Dataset that is part of the Catalog.</p>
        <p>Range: dcat:Dataset (1..n)</p>
    </dd>

    <p>
      Dataset objects <em class="rfc2119" title="SHOULD">SHOULD</em> have the following properties:
    </p>

    <dt id="homepage-property">homepage</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:catalog_homepage">
        <code>Catalog</code></a>
      <code>foaf:homepage</code>
      <p>This property refers to a web page that acts as the main page for the Catalog.</p>
      <p>Range: foaf:Document (0..1)</p>
    </dd>

    <dt id="language-property">language</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:catalog_language">
      <code>Catalog</code></a>
      <code>dct:language</code>
      <p>This property refers to a language used in the textual metadata describing titles, descriptions, etc. of the Datasets in the Catalog.</p>
      <p>Range: dct:LinguisticSystem (0..n)</p>
    </dd>

    <dt id="license-property">license</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:catalog_license">
      <code>Catalog</code></a>
      <code>dct:license</code>
      <p>This property refers to the licence under which the Catalog can be used or reused.</p>
      <p>Range: dct:LicenseDocument (0..1)</p>
    </dd>
    
    <dt id="releasedate-property">release date</dt>
		<dd>
		  A reference to an [[Vocab-DCAT]]
		  <a href="https://www.w3.org/TR/vocab-dcat/#Property:catalog_releasedate">
			<code>Catalog</code></a>
		  <code>dct:issued</code>
		  <p>This property contains the date of formal issuance (e.g., publication) of the Catalog.</p>
		  <p>Range: rdfs:Literal typed as xsd:date or xsd:dateTime (0..1)</p>
    </dd>
    
    <dt id="themes-property">themes</dt>
		<dd>
		  A reference to an [[Vocab-DCAT]]
		  <a href="https://www.w3.org/TR/vocab-dcat/#Property:catalog_themes">
			<code>Catalog</code></a>
		  <code>dcat:themeTaxonomy</code>
		  <p>This property refers to a knowledge organization system used to classify the Catalog's Datasets.</p>
		  <p>Range: skos:ConceptScheme (0..n)</p>
    </dd>
    
    <dt id="update_date-property">update/ modification date</dt>
		<dd>
		  A reference to an [[Vocab-DCAT]]
		  <a href="https://www.w3.org/TR/vocab-dcat/#Property:catalog_update date">
			<code>Catalog</code></a>
		  <code>dct:modified</code>
		  <p>This property contains the most recent date on which the Catalog was modified.</p>
		  <p>Range: rdfs:Literal typed as xsd:date or xsd:dateTime (0..1)</p>
		</dd>

    <p>
      Dataset objects <em class="rfc2119" title="MAY">MAY</em> have the following properties:
    </p>

    <dt id="hasPart-property">has Part</dt>
		<dd>
		  A reference to an [[DCAT-AP]]
		  <a href="">
			<code>Catalog</code></a>
		  <code>dct:hasPart</code>
		  <p>This property refers to a related Catalog that is part of the described Catalog</p>
		  <p>Range: dcat:Catalog (0..n)</p>
    </dd>
    
    <dt id="isPartOf-property">is Part Of</dt>
		<dd>
		  A reference to an [[DCAT-AP]]
		  <a href="">
			<code>Catalog</code></a>
		  <code>dct:isPartOf</code>
		  <p>This property refers to a related Catalog in which the described Catalog is physically or logically included.</p>
		  <p>Range: dcat:Catalog (0..1)</p>
    </dd>
    
    <dt id="record-property">record</dt>
		<dd>
		  A reference to an [[DCAT-AP]]
		  <a href="">
			<code>Catalog</code></a>
		  <code>dcat:record</code>
		  <p>This property refers to a Catalog Record that is part of the Catalog.</p>
		  <p>Range: dcat:CatalogRecord (0..n)</p>
    </dd>
    
    <dt id="rights-property">rights</dt>
		<dd>
		  A reference to an [[DCAT-AP]]
		  <a href="">
			<code>Catalog</code></a>
		  <code>dct:rights</code>
		  <p>This property refers to a statement that specifies rights associated with the Catalog.</p>
		  <p>Range: dct:RightsStatement (0..1)</p>
    </dd>
    
    <dt id="spatial-property">spatial / geographic</dt>
		<dd>
		  A reference to an [[DCAT-AP]]
		  <a href="">
			<code>Catalog</code></a>
		  <code>dct:spatial</code>
		  <p>This property refers to a geographical area covered by the Catalog.</p>
		  <p>Range: dct:Location (0..n)</p>
    </dd>
    
    <pre class="example highlight xml">
        <xmp>
          <dcat:Catalog rdf:about="http://transparenz.hamburg.de/">
            <!-- must -->
            <dct:title xml:lang="de">Transparenzportal Hamburg</dct:title>
            <dct:description xml:lang="de">Das Transparenzportal Hamburg ist das im Hamburgischen Transparenzgesetz (HmbTG) geforderte Informationsregister, über das alle per Gesetz veröffentlichungspflichtigen Informationen anonym recherchiert werden können. Es ist der zentrale Zugang zu aktuellen Daten und Informationen der Hamburger Verwaltung und stellt, um die leichte Auffindbarkeit der gesuchten Inhalte zu gewährleisten, eine Suche über den Volltext aller Datensätze bereit. Über den Suchschlitz kann nach Stichworten gesucht werden, es ist aber auch möglich, mit Hilfe der erweiterten Suche genaue Einschränkungen, z.B. nach Dateiformat, Kategorie oder Zeiträumen, vorzunehmen. Neben den veröffentlichungspflichtigen Inhalten können über das Transparenzportal Hamburg auch Informationen und Daten recherchiert werden, die freiwillig und zur Weiterverarbeitung zugänglich gemacht werden (siehe Open Data).</dct:description>
            <dct:publisher>
              <foaf:Agent rdf:about="http://www.hamburg.de/">
                <foaf:name>http://www.hamburg.de/</foaf:name>
                <odp:id>https://ckan.govdata.de/agent/N229dfaop44mamf6accb82fd2seya048a</odp:id>
                <dct:type rdf:resource="http://purl.org/adms/publishertype/LocalAuthority"/>                
              </foaf:Agent>
            </dct:publisher>
            <dcat:dataset rdf:resource="https://www.govdata.de/web/guest/suchen/-/details/naturraume-geest-und-marsch3"/>            
            <!-- should -->
            <foaf:homepage rdf:resource="http://transparenz.hamburg.de/"/>            
            <dct:language rdf:resource="http://publications.europa.eu/resource/authority/language/DEU"/>
            <dct:language rdf:resource="http://publications.europa.eu/resource/authority/language/ENG"/>
            <dct:license rdf:resource="http://dcat-ap.de/def/licenses/dl-by-de/2.0"/>
            <dct:issued rdf:datatype="http://www.w3.org/2001/XMLSchema#date">2017-03-09</dct:issued>
            <dcat:themeTaxonomy rdf:resource="http://publications.europa.eu/resource/authority/data-theme"/>
            <dct:modified rdf:datatype="http://www.w3.org/2001/XMLSchema#date">2018-04-05</dct:modified>
            <!-- may -->
            <dct:hasPart rdf:resource="http://transparenz.hamburg.de/energie"/>
            <dct:isPartOf rdf:resource="https://www.govdata.de"/>            
            <dcat:record rdf:resource="http://suche.transparenz.hamburg.de/dataset/naturraume-geest-und-marsch5"/>
            <dct:rights rdf:resource="http://transparenz.hamburg.de/rightsstatement"/>
            <dct:spatial>
              <locn:Address>
                <locn:fullAddress>Die Freie und Hansestadt Hamburg, Rathausmarkt 1, 20095 Hamburg </locn:fullAddress>
                <locn:poBox>Postfach 1000</locn:poBox>
                <locn:locatorDesignator>D</locn:locatorDesignator>
                <locn:locatorName>Haus</locn:locatorName>
                <locn:addressArea>Hamburg</locn:addressArea>
                <locn:postName>Die Freie und Hansestadt Hamburg</locn:postName>
                <locn:adminUnitL2 rdf:resource="http://dcat-ap.de/def/politicalGeocoding/stateKey/02"/>
                <locn:adminUnitL1 rdf:resource="http://publications.europa.eu/resource/authority/atu/DEU"/>
                <locn:postCode>20095</locn:postCode>
                <locn:addressID>ID 97653</locn:addressID>
              </locn:Address>
            </dct:spatial>
          </dcat:Catalog>
        </xmp>
    </pre>
    
    </section>

    <section id="CatalogRecord">
      <h3 role="heading" aria-level="2" id="catalogRecord">Catalog Record</h3>
      <p>This class is optional and not all catalogs will use it. It exists for catalogs where a distinction is made between metadata about a dataset and metadata about the dataset's entry in the catalog. 
        (ActivityPub: Object)
      </p>

      <p>
        Catalog Record objects <em class="rfc2119" title="MUST">MUST</em> have the following properties:
      </p>

      <dt id="primaryTopic-property">primary topic</dt>
      <dd>
        A reference to an [[Vocab-DCAT]]
        <a href="https://www.w3.org/TR/vocab-dcat/#Property:catalog_primaryTopic">
        <code>Catalog</code></a>
        <code>foaf:primaryTopic</code>
        <p>This property links the Catalogue Record to the Dataset described in the record.</p>
        <p>Range: dcat:Dataset (1..1)</p>
      </dd>

      <dt id="modified-property">update/ modification date</dt>
      <dd>
        A reference to an [[Vocab-DCAT]]
        <a href="https://www.w3.org/TR/vocab-dcat/#Property:catalog_modified">
        <code>Catalog</code></a>
        <code>date dct:modified</code>
        <p>This property contains the most recent date on which the Catalog entry was changed or modified.</p>
        <p>Range: rdfs:Literal typed as xsd:date or xsd:dateTime (1..1)</p>
      </dd>      

      <p>
        Catalog Record objects <em class="rfc2119" title="SHOULD">SHOULD</em> have the following properties:
      </p>

      <dt id="issued-property">listing date</dt>
			<dd>
			  A reference to an [[Vocab-DCAT]]
			  <a href="https://www.w3.org/TR/vocab-dcat/#Property:record_release_date">
				<code>Catalog</code></a>
			  <code>dct:issued</code>
			  <p>This property contains the date on which the description of the Dataset was included in the Catalog.</p>
			  <p>Range: rdfs:Literal typed as xsd:date or xsd:dateTime (0..1)</p>
      </dd>
      
      <dt id="changetype-property">change type</dt>
      <dd>
        A reference to an [[DCAT-AP]]
        <a href="">
        <code>Catalog</code></a>
        <code>adms:status</code>
        <p>It MUST take one of the values :created, :updated or :deleted depending on whether this latest revision is a result of a creation, update or deletion.</p>
        <p>Range: skos:Concept (0..1)</p>
      </dd>

      <dt id="conformsTo-property">application profile</dt>
      <dd>
        A reference to an [[DCAT-AP]]
        <a href="">
        <code>Catalog</code></a>
        <code>dct:conformsTo</code>
        <p>This property refers to an Application Profile that the Dataset’s metadata conforms to 0..1 change type adms:status skos:Concept This property refers to the type of the latest revision of a Dataset's entry in the Catalog.</p>
        <p>Range: rdfs:Resource (0..1)</p>
      </dd>
      
      <p>
        Catalog Record objects <em class="rfc2119" title="MAY">MAY</em> have the following properties:
      </p>

      <dt id="title-property">title</dt>
			<dd>
			  A reference to an [[Vocab-DCAT]]
			  <a href="https://www.w3.org/TR/vocab-dcat/#Property:catalog_title">
				<code>Catalog</code></a>
			  <code>dct:title</code>
			  <p>This property contains a name given to the Catalogue Record.</p>
			  <p>Range: rdfs:Literal (0..n)</p>
      </dd>
      
      <dt id="description-property">description</dt>
			<dd>
			  A reference to an [[Vocab-DCAT]]
			  <a href="https://www.w3.org/TR/vocab-dcat/#Property:catalog_description">
				<code>Catalog</code></a>
			  <code>dct:description</code>
			  <p>This property contains a free-text account of the record.</p>
			  <p>Range: rdfs:Literal (0..n)</p>
      </dd>
      
      <dt id="language-property">language</dt>
      <dd>
        A reference to an [[DCAT-AP]]
        <a href="">
        <code>Catalog</code></a>
        <code>dct:language</code>
        <p>This property refers to a language used in the textual metadata describing titles, descriptions, etc. of the Dataset.</p>
        <p>Range: dct:LinguisticSystem (0..n)</p>
      </dd>  

      <dt id="source-property">source metadata</dt>
      <dd>
        A reference to an [[DCAT-AP]]
        <a href="">
        <code>Catalog</code></a>
        <code>dct:source</code>
        <p>This property refers to the original metadata that was used in creating metadata for the Dataset.</p>
        <p>Range: dcat:CatalogRecord (0..1)</p>
      </dd>

      <pre class="example highlight xml">
          <xmp>
            <dcat:CatalogRecord rdf:about="http://suche.transparenz.hamburg.de/dataset/naturraume-geest-und-marsch5">
              <!-- must -->
              <foaf:primaryTopic rdf:resource="https://www.govdata.de/web/guest/suchen/-/details/naturraume-geest-und-marsch3"/>
              <dct:modified rdf:datatype="http://www.w3.org/2001/XMLSchema#dateTime">2017-03-10T10:00:00</dct:modified>
              <!-- should -->
              <dct:issued rdf:datatype="http://www.w3.org/2001/XMLSchema#date">2017-03-09</dct:issued>
              <adms:status rdf:resource="http://purl.org/adms/status/Completed"/>
              <dct:conformsTo rdf:resource="http://www.Referenz-auf-ein-Application-Profile.de"/>
              <!-- may -->
              <dct:title xml:lang="de">Naturräume Geest und Marsch</dct:title>
              <dct:description xml:lang="de">Die Zuordnung des Hamburger Stadtgebietes zu den Naturräumen Geest und Marsch wird dargestellt.</dct:description>              
              <dct:language rdf:resource="http://publications.europa.eu/resource/authority/language/DEU"/>              
              <dct:source rdf:resource="http://suche.transparenz.hamburg.de/dataset/naturraume-geest-und-marsch5"/>
            </dcat:CatalogRecord>
          </xmp>
      </pre>
      
    </section>

    <section id="Distribution">
      <h3 role="heading" aria-level="2" id="distribution">Distribution</h3>
      <p>Represents a specific available form of a dataset. Each dataset might be available in different forms, these forms might represent different formats of the dataset or different endpoints. Examples of distributions include a downloadable CSV file, an API or an RSS feed.
        (ActivityPub: )
      </p>

      <p>
        Distribution objects <em class="rfc2119" title="MUST">MUST</em> have the following properties:
      </p>

      <dt id="accessurl-property">access URL</dt>
			<dd>
			  A reference to an [[Vocab-DCAT]]
			  <a href="https://www.w3.org/TR/vocab-dcat/#Property:distribution_accessurl">
				<code>Distribution</code></a>
			  <code>dcat:accessURL</code>
			  <p>This property contains a URL that gives access to a Distribution of the Dataset. The resource at the access URL may contain information about how to get the Dataset.</p>
			  <p>Range: rdfs:Resource (1..n)</p>
			</dd>

      <p>
        Distribution objects <em class="rfc2119" title="SHOULD">SHOULD</em> have the following properties:
      </p>

      <dt id="description-property">description</dt>
			<dd>
			  A reference to an [[Vocab-DCAT]]
			  <a href="https://www.w3.org/TR/vocab-dcat/#Property:distribution_description">
				<code>Distribution</code></a>
			  <code>dct:description</code>
			  <p>This property contains a free-text account of the Distribution.</p>
			  <p>Range: rdfs:Literal (0..n)</p>
      </dd>
      
      <dt id="format-property">format</dt>
			<dd>
			  A reference to an [[Vocab-DCAT]]
			  <a href="https://www.w3.org/TR/vocab-dcat/#Property:distribution_format">
				<code>Distribution</code></a>
			  <code>dct:format</code>
			  <p>This property refers to the file format of the Distribution.</p>
			  <p>Range: dct:MediaTypeOrExtent (0..1)</p>
      </dd>
      
      <dt id="licence-property">licence</dt>
			<dd>
			  A reference to an [[Vocab-DCAT]]
			  <a href="https://www.w3.org/TR/vocab-dcat/#Property:distribution_licence">
				<code>Distribution</code></a>
			  <code>dct:license</code>
			  <p>This property refers to the licence under which the Distribution is made available.</p>
			  <p>Range: dct:LicenseDocument (0..1)</p>
			</dd>
      
      <p>
        Distribution objects <em class="rfc2119" title="MAY">MAY</em> have the following properties:
      </p>

      <dt id="byteSize-property">byte size</dt>
			<dd>
			  A reference to an [[Vocab-DCAT]]
			  <a href="https://www.w3.org/TR/vocab-dcat/#Property:distribution_byteSize">
				<code>Distribution</code></a>
			  <code>dcat:byteSize</code>
			  <p>This property contains the size of a Distribution in bytes.</p>
			  <p>Range: rdfs:Literal typed as xsd:decimal (0..1)</p>
      </dd>
      
      <dt id="checksum-property">checksum</dt>
		<dd>
		  A reference to an [[DCAT-AP]]
		  <a href="">
			<code>Distribution</code></a>
		  <code>spdx:checksum</code>
		  <p>This property provides a mechanism that can be used to verify that the contents of a distribution have not changed</p>
		  <p>Range: spdx:Checksum (0..1)</p>
    </dd>
    
    <dt id="documentation-property">documentation</dt>
		<dd>
		  A reference to an [[DCAT-AP]]
		  <a href="">
			<code>Distribution</code></a>
		  <code>foaf:page</code>
		  <p>This property refers to a page or document about this Distribution.</p>
		  <p>Range: foaf:Document (0..n)</p>
    </dd>
    
    <dt id="downloadURL-property">downloadURL</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:distribution_downloadURL">
      <code>Distribution</code></a>
      <code>dcat:downloadURL</code>
      <p>This property contains a URL that is a direct link to a downloadable file in a given format.</p>
      <p>Range: downloadURL rdfs:Resource (0..n)</p>
    </dd>

    <dt id="language-property">language</dt>
		<dd>
		  A reference to an [[DCAT-AP]]
		  <a href="">
			<code>Distribution</code></a>
		  <code>dct:language</code>
		  <p>This property refers to a language used in the Distribution.</p>
		  <p>Range: dct:LinguisticSystem (0..n)</p>
    </dd>
    
    <dt id="conformsTo-property">linked schemas</dt>
		<dd>
		  A reference to an [[DCAT-AP]]
		  <a href="">
			<code>Distribution</code></a>
		  <code>dct:conformsTo</code>
		  <p>This property refers to an established schema to which the described Distribution conforms.</p>
		  <p>Range: dct:Standard (0..n)</p>
    </dd>
    
    <dt id="mediaType-property">mediaType</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:distribution_mediaType">
      <code>Distribution</code></a>
      <code>dcat:mediaType, subproperty of dct:format</code>
      <p>This property refers to the media type of the Distribution as defined in the official register of media types managed by IANA.</p>
      <p>Range: dct:MediaTypeOrExtent (0..1)</p>
    </dd>

    <dt id="issued-property">release date</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:distribution_issued">
      <code>Distribution</code></a>
      <code>dct:issued</code>
      <p>This property contains the date of formal issuance (e.g., publication) of the Distribution.</p>
      <p>Range: rdfs:Literal typed as xsd:date or xsd:dateTime (0..1)</p>
    </dd>

    <dt id="rights-property">rights</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:distribution_rights">
      <code>Distribution</code></a>
      <code>dct:rights</code>
      <p>This property refers to a statement that specifies rights associated with the Distribution.</p>
      <p>Range: dct:RightsStatement (0..1)</p>
    </dd>

    <dt id="status-property">status</dt>
		<dd>
		  A reference to an [[DCAT-AP]]
		  <a href="">
			<code>Distribution</code></a>
		  <code>adms:status</code>
		  <p>This property refers to the maturity of the Distribution</p>
		  <p>Range: skos:Concept (0..1)</p>
    </dd>
    
    <dt id="title-property">title</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:distribution_title">
      <code>Distribution</code></a>
      <code>dct:title</code>
      <p>This property contains a name given to the Distribution.</p>
      <p>Range: rdfs:Literal (0..n)</p>
    </dd>
      
    <dt id="modified-property">update/ modification date</dt>
    <dd>
      A reference to an [[Vocab-DCAT]]
      <a href="https://www.w3.org/TR/vocab-dcat/#Property:distribution_modified">
      <code>Distribution</code></a>
      <code>dct:modified</code>
      <p>This property contains the most recent date on which the Distribution was changed or modified.</p>
      <p>Range: rdfs:Literal typed as xsd:date or xsd:dateTime (0..1)</p>
    </dd>
    
    <pre class="example highlight xml">
      <xmp>
        <dcat:Distribution rdf:about="http://geodienste.hamburg.de/HH_WFS_Grundwasserschutz?SERVICE=WFS&amp;VERSION=1.1.0&amp;REQUEST=GetFeature&amp;typename=BSU_Z_Grundwasserschutz:Geest-_Marsch">
          <!-- must -->
          <dcat:accessURL rdf:resource="http://geodienste.hamburg.de/HH_WFS_Grundwasserschutz?SERVICE=WFS&amp;VERSION=1.1.0&amp;REQUEST=GetFeature&amp;typename=BSU_Z_Grundwasserschutz:Geest-_Marsch"/>
          <!-- should -->
          <dct:description xml:lang="de">Das ist eine deutsche Beschreibung der Distribution 1</dct:description>
          <dct:format>csv</dct:format>
          <dct:license rdf:resource="http://dcat-ap.de/def/licenses/dl-by-de/2.0"/>         
          <!-- may -->
          <dcat:byteSize rdf:datatype="http://www.w3.org/2001/XMLSchema#decimal">685246000</dcat:byteSize>
          <checksum xmlns="http://spdx.org/rdf/terms#" rdf:nodeID="node1c7ra5t0ax2"/>
          <foaf:page rdf:resource="https://www.govdata.de/ckan/api/rest/dataset/naturraume-geest-und-marsch3"/>
          <dcat:downloadURL rdf:resource="http://geodienste.hamburg.de/HH_WFS_Grundwasserschutz?SERVICE=WFS&amp;VERSION=1.1.0&amp;REQUEST=GetFeature&amp;typename=BSU_Z_Grundwasserschutz:Geest-_Marsch"/>
          <dct:language rdf:resource="http://publications.europa.eu/resource/authority/language/DEU"/>
          <dct:conformsTo rdf:resource="http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"/>
          <dcat:mediaType rdf:resource="https://www.iana.org/assignments/media-types/application/gml+xml"/>
          <dct:issued rdf:datatype="http://www.w3.org/2001/XMLSchema#date">2017-02-27</dct:issued>
          <dct:rights rdf:nodeID="node1c7ra5t0ax1"/>
          <adms:status rdf:resource="http://purl.org/adms/status/Completed"/>
          <dct:title xml:lang="de">Download WFS Naturräume Geest und Marsch (GML)</dct:title>
          <dct:modified rdf:datatype="http://www.w3.org/2001/XMLSchema#dateTime">2017-03-07T10:00:00</dct:modified>
        </dcat:Distribution>
        <odrs:RightsStatement rdf:nodeID="node1c7ra5t0ax1">
          <odrs:attributionText xml:lang="de">Freie und Hansestadt Hamburg, Behörde für Umwelt und Energie, 2015</odrs:attributionText>
          <odrs:attributionText xml:lang="en">Free and Hanseatic City of Hamburg, Department of Environment and Energy, 2015</odrs:attributionText>
          <odrs:copyrightYear>2015</odrs:copyrightYear>
        </odrs:RightsStatement>
      </xmp>
    </pre>
  
      
    </section>

    <section id="Agent">
      <h3 role="heading" aria-level="2" id="agent">Agent</h3>
      <p>This class describes an Agent that publishes Data. It <em class="rfc2119" title="MAY">MAY</em>  have all fields provided by the <a href="http://xmlns.com/foaf/0.1/Person">foaf:Person</a> and <a href="http://xmlns.com/foaf/spec/">foaf:Organization</a> Vocabulary Specification.
        (ActivityPub: )
      </p>

      <p>
        Agent objects <em class="rfc2119" title="MUST">MUST</em> have the following properties:
      </p>

    <dt id="name-property">name</dt>
		<dd>
		  A reference to an [[DCAT-AP]]
		  <a href="">
			<code>Agent</code></a>
		  <code>foaf:name</code>
		  <p>This property contains a name of the agent. This property can be repeated for different versions of the name (e.g. the name in different languages)</p>
		  <p>Range: rdfs:Literal (1..n)</p>
		</dd>

    <dt id="description-id">id</dt>
    <dd>
      A new field by OpenDataPub.
        <code>Dataset</code></a>
        <code>odp:id</code>
        <p>This property contains an unique identifier across the whole web. This is an URL in combination with the actor id.</p>
        <p>Range: dfs:Literal (1..1)</p>
    </dd>

      <p>
        Agent objects <em class="rfc2119" title="SHOULD">SHOULD</em> have the following properties:
      </p>

    <dt id="type-property">type</dt>
		<dd>
		  A reference to an [[DCAT-AP]]
		  <a href="">
			<code>Agent</code></a>
		  <code>dct:type</code>
		  <p>This property refers to a type of the agent that makes the Catalogue or Dataset available.</p>
		  <p>Range: skos:Concept (0..1)</p>
    </dd>
    
    <pre class="example highlight xml">
        <xmp>
            <foaf:Agent rdf:about="http://www.hamburg.de/bue/">
              <!-- must -->
              <foaf:name>Behörde für Umwelt und Energie (BUE), Amt für Umweltschutz</foaf:name>
              <odp:id>https://ckan.govdata.de/agent/N229dfea990bb44c8836accb82fd1047b</odp:id>
              <!-- should -->
              <dct:type rdf:resource="http://purl.org/adms/publishertype/LocalAuthority"/>
            </foaf:Agent>     
        </xmp>
      </pre>
    
  
      
    </section>

    <section id="CategoryScheme">
      <h3 role="heading" aria-level="2" id="CategoryScheme">Category Scheme</h3>
      <p>The knowledge organization system (KOS) used to represent themes/categories of datasets in the catalog. 
        It <em class="rfc2119" title="MAY">MAY</em> have all fields provided by the <a href="https://www.w3.org/TR/skos-reference/#schemes">skos:ConceptScheme</a> Vocabulary Specification. 
        The Category Scheme is being used in the Catalog Themes and Dataset Theme.
        (ActivityPub: )
      </p>

      <p>
        Category Scheme objects <em class="rfc2119" title="MUST">MUST</em> have the following properties:
      </p>

      <dt id="title-property">title</dt>
      <dd>
        A reference to an [[DCAT-AP]]
        <a href="">
        <code>Category Scheme</code></a>
        <code>dct:title</code> and [[Vocab-DCAT]] <a href="https://www.w3.org/TR/vocab-dcat/#class-concept-scheme"><code>Concept scheme</code></a>
        <p>This property contains a name of the category scheme. May be repeated for different versions of the name</p>
        <p>Range: rdfs:Literal (1..n)</p>
      </dd>
  
      <pre class="example highlight xml">
        <xmp>
            <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" 
                xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" 
                xmlns:owl="http://www.w3.org/2002/07/owl#" 
                xmlns:skos="http://www.w3.org/2004/02/skos/core#" 
                xmlns:ns4="http://purl.org/dc/terms/" 
                xmlns:ns5="http://www.w3.org/2008/05/skos-xl#" 
                xmlns:ns6="http://publications.europa.eu/ontology/authority/">   
                <dct:title>Use Context</dct:title>      
                <rdf:Description rdf:about="http://publications.europa.eu/resource/authority/use-context">
                    <rdf:type rdf:resource="http://www.w3.org/2002/07/owl#Ontology" />
                    <rdf:type rdf:resource="http://www.w3.org/2004/02/skos/core#ConceptScheme" />
                    <rdfs:label xml:lang="en">Use context</rdfs:label>
                    <owl:imports rdf:resource="http://publications.europa.eu/ontology/euvoc" />
                    <rdfs:comment rdf:datatype="http://www.w3.org/2000/01/rdf-schema#Literal">Use context</rdfs:comment>
                    <skos:prefLabel xml:lang="en">Use context</skos:prefLabel>
                </rdf:Description>                
                <rdf:Description rdf:about="http://publications.europa.eu/resource/authority/use-context/DCAT_AP">
                    <skos:inScheme rdf:resource="http://publications.europa.eu/resource/authority/use-context" />
                    <skos:topConceptOf rdf:resource="http://publications.europa.eu/resource/authority/use-context" />
                </rdf:Description>                
            </rdf:RDF>
        </xmp>
      </pre>
      
    </section>

    <section id="Category">
      <h3 role="heading" aria-level="2" id="category">Category</h3>
      <p>A category or a theme used to describe datasets in the catalog.
        It is recommended to use either skos:inScheme or skos:topConceptOf on every skos:Concept used to classify datasets to link it to the concept scheme it belongs to. This concept scheme is typically associated with the catalog using dcat:themeTaxonomy.
        It <em class="rfc2119" title="MAY">MAY</em> have all fields provided by the <a href="https://www.w3.org/TR/skos-reference/#concepts">skos:ConceptScheme</a> Vocabulary Specification. 
        The Category is being used in the Catalog Themes and Dataset Theme.
        (ActivityPub: )
      </p>

      <p>
        Category objects <em class="rfc2119" title="MUST">MUST</em> have the following properties:
      </p>

      <dt id="preferredlabel-property">preferred label</dt>
      <dd>
        A reference to an [[DCAT-AP]]
        <a href="">
        <code>Category Scheme</code></a>
        <code>skos:prefLabel</code> and [[Vocab-DCAT]] <a href="https://www.w3.org/TR/vocab-dcat/#class-concept"><code>Concept</code></a>
        <p>This property contains a preferred label of the category. This property can be repeated for parallel language versions of the label.</p>
        <p>Range: rdfs:Literal (1..n)</p>
      </dd>

      <pre class="example highlight xml">
        <xmp>
            <rdf:RDF>
              <rdf:Description rdf:about="http://publications.europa.eu/resource/authority/data-theme/ENVI">
              <skos:inScheme rdf:resource="http://publications.europa.eu/resource/authority/data-theme"/>
              <skos:prefLabel xml:lang="en">Environment</skos:prefLabel>
              <skos:prefLabel xml:lang="ro">Mediu</skos:prefLabel>
              <skos:prefLabel xml:lang="hr">Okoliš</skos:prefLabel>
              <skos:prefLabel xml:lang="et">Keskkond</skos:prefLabel>
              <skos:prefLabel xml:lang="fi">Ympäristö</skos:prefLabel>
              <skos:prefLabel xml:lang="es">Medio ambiente</skos:prefLabel>
              <skos:prefLabel xml:lang="lv">Vide</skos:prefLabel>
              <skos:prefLabel xml:lang="sl">Okolje</skos:prefLabel>
              <skos:prefLabel xml:lang="fr">Environnement</skos:prefLabel>
              <skos:prefLabel xml:lang="sv">Miljö</skos:prefLabel>
              <skos:prefLabel xml:lang="pl">Środowisko</skos:prefLabel>
              <skos:prefLabel xml:lang="nl">Milieu</skos:prefLabel>
              <skos:prefLabel xml:lang="no">Miljø</skos:prefLabel>
              <skos:prefLabel xml:lang="ga">Comhshaol</skos:prefLabel>
              <skos:prefLabel xml:lang="sk">Životné prostredie</skos:prefLabel>
              <skos:prefLabel xml:lang="hu">Környezet</skos:prefLabel>
              <skos:prefLabel xml:lang="cs">Životní prostředí</skos:prefLabel>
              <skos:prefLabel xml:lang="pt">Ambiente</skos:prefLabel>
              <skos:prefLabel xml:lang="bg">Околна среда</skos:prefLabel>
              <skos:prefLabel xml:lang="el">Περιβάλλον</skos:prefLabel>
              <skos:prefLabel xml:lang="da">Miljø</skos:prefLabel>
              <skos:prefLabel xml:lang="it">Ambiente</skos:prefLabel>
              <skos:prefLabel xml:lang="de">Umwelt</skos:prefLabel>
              <skos:prefLabel xml:lang="lt">Aplinka</skos:prefLabel>
              <skos:prefLabel xml:lang="mt">Ambjent</skos:prefLabel>                 
            </rdf:Description>
          </rdf:RDF> 
        </xmp>
      </pre>
  
      
    </section>

    <section id="Checksum">
      <h3 role="heading" aria-level="2" id="checksum">Checksum</h3>
      <p>A Checksum is value that allows the contents of a file to be authenticated. Even small changes to the content of the file will change its checksum. This class allows the results of a variety of checksum and cryptographic message digest algorithms to be represented.
        It <em class="rfc2119" title="MAY">MAY</em> have all fields provided by the <a href="https://spdx.org/rdf/terms/#Checksum">spdx:Checksum</a> Vocabulary Specification. 
        (ActivityPub: )
      </p>

      <p>
        Checksum objects <em class="rfc2119" title="MUST">MUST</em> have the following properties:
      </p>

      <dt id="algorithm-property">algorithm</dt>
      <dd>
        A reference to an [[DCAT-AP]]
        <a href="">
        <code>Checksum</code></a>
        <code>spdx:algorithm</code>
        <p>This property identifies the algorithm used to produce the subject Checksum. Currently, SHA-1 is the only supported algorithm. It is anticipated that other algorithms will be supported at a later time.</p>
        <p>Range: spdx:checksumAlgorithm_sha1 (1..1)</p>
      </dd>  

      <dt id="checksumvalue-property">checksum value</dt>
      <dd>
        A reference to an [[DCAT-AP]]
        <a href="">
        <code>Checksum</code></a>
        <code>spdx:checksumValue</code>
        <p>This property provides a lower case hexadecimal encoded digest value produced using a specific algorithm.</p>
        <p>Range: rdfs:Literal typed as xsd:hexBinary (1..1)</p>
      </dd>  

      <pre class="example highlight xml">
          <xmp>
            <Checksum xmlns="http://spdx.org/rdf/terms#" rdf:nodeID="node1c7ra5t0ax2">
              <!-- must -->
              <checksumValue xmlns="http://spdx.org/rdf/terms#">5bcc814127be171c75595d419f371c74c9cf041</checksumValue>
              <algorithm xmlns="http://spdx.org/rdf/terms#" rdf:resource="http://dcat-ap.de/def/hashAlgorithms/sha/1"/>
            </Checksum>      
          </xmp>
        </pre>
      
    </section>

    <section id="Identifier">
      <h3 role="heading" aria-level="2" id="identifier">Identifier</h3>
      <p>This is based on the [[UN-CEFACT-V3-1]] Identifier class. The type of the class is the adms:identifier.
        (ActivityPub: )
      </p>

      <p>
        Identifier objects <em class="rfc2119" title="MUST">MUST</em> have the following properties:
      </p>

      <dt id="notation-property">notation</dt>
      <dd>
        A reference to an [[DCAT-AP]]
        <a href="">
        <code>Identifier</code></a>
        <code>skos:notation</code>
        <p>This property contains a string that is an identifier in the context of the identifier scheme referenced by its datatype.</p>
        <p>Range: rdfs:Literal typed with the URI of one of the members of the DataCite Resource Identifier Scheme (0..1)</p>
      </dd>  

      <pre class="example highlight xml">
        <xmp>
          <adms:identifier>
            <!-- must -->
            <skos:notation>4635D337-4805-4C32-A211-13F8C038BF27</skos:notation>
          </adms:identifier>          
        </xmp>
      </pre>
    </section>

    <section id="Licence">
      <h3 role="heading" aria-level="2" id="Licence">Licence</h3>
      <p>A legal document giving official permission to do something with a Resource.
        It <em class="rfc2119" title="MAY">MAY</em> have all fields provided by the <a href="http://purl.org/dc/terms/LicenseDocument">dct:LicenseDocument</a> Dublin Core Metadata Initiative.
        (ActivityPub: )
      </p>

      <p>
        Identifier objects <em class="rfc2119" title="SHOULD">SHOULD</em> have the following properties:
      </p>

      <dt id="licencetype-property">licence type</dt>
        <dd>
          A reference to an [[DCAT-AP]]
          <a href="">
          <code>Licence</code></a>
          <code>dct:type</code>
          <p>This property refers to a type of licence, e.g. indicating ‘public domain’ or ‘royalties required’.</p>
          <p>Range: skos:Concept (0..n)</p>
        </dd> 

        <pre class="example highlight xml">
          <xmp>
            <dct:LicenseDocument>
              <!-- should -->
              <dct:type>public domain</type>
            </dct:LicenseDocument>          
          </xmp>
        </pre>

    </section>

    <section id="PeriodOfTime">
        <h3 role="heading" aria-level="2" id="PeriodOfTime">Period Of Time</h3>
        <p>The Period of Time is a range of dates.
          It <em class="rfc2119" title="MAY">MAY</em> have all fields provided by the <a href="http://purl.org/dc/terms/PeriodOfTime">dct:PeriodOfTime</a> Dublin Core Metadata Initiative.
          (ActivityPub: )
        </p>
  
        <p>
          Identifier objects <em class="rfc2119" title="MAY">MAY</em> have the following properties:
        </p>

        <dt id="startDate-property">start date/time</dt>
        <dd>
          A reference to an [[DCAT-AP]]
          <a href="">
          <code>PeriodOfTime</code></a>
          <code>schema:startDate</code>
          <p>This property contains the start of the period.</p>
          <p>Range: rdfs:Literal typed as xsd:date or xsd:dateTime (0..1)</p>
        </dd>    

        <dt id="endDate-property">end date/time</dt>
        <dd>
          A reference to an [[DCAT-AP]]
          <a href="">
          <code>PeriodOfTime</code></a>
          <code>schema:endDate</code>
          <p>This property contains the end of the period.</p>
          <p>Range: rdfs:Literal typed as xsd:date or xsd:dateTime (0..1)</p>
        </dd>  
          

        <pre class="example highlight xml">
          <xmp>
            <dct:PeriodOfTime>
              <!-- may -->
              <schema:startDate rdf:datatype="http://www.w3.org/2001/XMLSchema#date">2000-01-01</schema:startDate>
              <schema:endDate rdf:datatype="http://www.w3.org/2001/XMLSchema#date">9999-12-31</schema:endDate>
            </dct:PeriodOfTime>          
          </xmp>
        </pre>
          
      </section>

      <section id="Instance">
        <h3 role="heading" aria-level="2" id="Instance">Instance</h3>
        <p>The Instance is a description of a server in the OpenDataPub network.
        </p>
  
        <p>
          Instance objects <em class="rfc2119" title="MUST">MUST</em> have the following properties:
        </p>

        <dt id="id-property">Identifier</dt>
        <dd>
          <code>Instance</code></a>
          <code>odp:identifier</code>
          <p>This contains the URL to the instance, which is the unique identifer.</p>
          <p>Range: rdfs:Literal (1..1)</p>
        </dd>    

        <p>
          Instance objects <em class="rfc2119" title="SHOULD">SHOULD</em> have the following properties:
        </p>

        <dt id="endpoint-property">API Endpoint</dt>
        <dd>
          <code>Instance</code></a>
          <code>odp:endpoint</code>
          <p>This property contains URL to the OpenDataPub API endpoint. It has to be supplied if the endpoint URL varies from the default URL.</p>
          <p>Range: rdfs:Literal (0..1)</p>
        </dd>  
          

        <pre class="example highlight xml">
          <xmp>
            <odp:instance>
              <!-- must -->
              <odp:identifier>http://www.govdata.de</odp:identifier>
              <!-- should -->
              <odp:endpoint>http://www.govdata.de/odp/api/</odp:endpoint>
          </odp:instance>          
          </xmp>
        </pre>
          
      </section>
  </section>

  <section id="collections">
    <h2 role="heading" aria-level="2">Collections</h2>

   <section id="outbox">
        <h2 role="heading" aria-level="2">Outbox</h2>
        <p>
          The outbox is discovered through the <code>outbox</code>
          property of a <a href="#endpointinfo">server's info endpoint.</a>
          The <code>outbox</code> MUST be an
          <a href="https://www.w3.org/TR/activitystreams-vocabulary/#dfn-orderedcollection">
            <code>OrderedCollection</code></a>.
        </p>
        <p>
          The outbox stream contains datasets the server has
          published, subject to the ability of the requestor to retrieve the
          datasets.
        </p>
        <p>
          The outbox accepts HTTP POST requests, with behaviour described in
          <a href="#communication">communication
            Interactions</a>.
        </p>
      </section>

      <section id="inbox">
        <h2 role="heading" aria-level="2">Inbox</h2>

        <p>
          The inbox is discovered through the <code>inbox</code>
          property of a <a href="#endpointinfo">server's info endpoint</a>.
          The <code>inbox</code> MUST be an
          <a href="https://www.w3.org/TR/activitystreams-vocabulary/#dfn-orderedcollection">
            <code>OrderedCollection</code></a>.
        </p>

        <p>
          The inbox stream contains all datasets received by the
          server.
        </p>

        <p>
          The server MUST perform de-duplication of datasets returned by
          the inbox. Duplication can occur if an dataset is published by a member of the circle of trust and by a server the server is subscribed to.
          Such deduplication MUST be performed by comparing the
          <code>id</code> of the activities and dropping any activities
          already seen.
        </p>

        <p>
          The inboxes of actors on federated servers accepts HTTP POST requests,
          with behaviour described in <a href="#communication">Delivery</a>.
        </p>
    </section>

    <section id="cot">
      <h2 role="heading" aria-level="2">Circle of Trust</h2>

      <p>
        Every server MUST have a circle of trust collection. This is a list of every server who this server trusts to accept datasets from. 
        The circle of trust collection MUST be an CircleOfTrustCollection.
      </p>        

      <h3 role="heading" aria-level="2" id="CircleOfTrustCollection">CircleOfTrustCollection</h3>
      <p>The CircleOfTrustCollection is a collection of Circle of Trust Entries.
      </p>

      <p>
        CircleOfTrustCollection objects <em class="rfc2119" title="MUST">MUST</em> have the following properties:
      </p>

      <dt id="Members-property">Members</dt>
      <dd>
        <code>CircleOfTrustCollection</code></a>
        <code>odp:members</code>
        <p>This contains a list of members of the circle of trust. There must be at least one entry, which would be the server itself.</p>
        <p>Range: odp:Instance (1..n)</p>
      </dd>    

      <p>
        CircleOfTrustCollection objects <em class="rfc2119" title="MAY">MAY</em> have the following properties:
      </p>
      <dt id="CircleLeader-property">Circle Leader</dt>
      <dd>
        <code>CircleOfTrustCollection</code></a>
        <code>odp:circleleader</code>
        <p>This contains a single member of the circle of trust that is the circle leader. If there is no circle leader this property is empty and can be omitted.</p>
        <p>Range: odp:Instance (0..1)</p>
      </dd> 

      <pre class="example highlight xml">
        <xmp>
          <odp:CircleOfTrustCollection>
            <!-- must -->
            <odp:members>
              <odp:instance>
                <odp:identifier>http://www.govdata.de</odp:identifier>
                <odp:endpoint>http://www.govdata.de/odp/api/</odp:endpoint>
              </odp:instance>
            </odp:members>
            <!-- may -->
            <odp:circleleader>
              <odp:identifier>http://www.govdata.de</odp:identifier>
              <odp:endpoint>http://www.govdata.de/odp/api/</odp:endpoint>
            </odp:circleleader>            
        </odp:CircleOfTrustCollection>          
        </xmp>
      </pre>

    </section>

    <section id="sc">
      <h2 role="heading" aria-level="2">Subscription Collection</h2>

      <p>
        Every server MUST have a subscription collection. This is a list of every server who has subscribed to the datasets of a server. 
        The subscription collection MUST be an SubscriptionCollection.
      </p>        

      <h3 role="heading" aria-level="2" id="SubscriptionCollection">SubscriptionCollection</h3>
      <p>The SubscriptionCollection is a collection of instances.
      </p>

      <p>
        SubscriptionCollection objects <em class="rfc2119" title="MAY">MAY</em> have the following properties:
      </p>
      <dt id="Members-property">Members</dt>
      <dd>
        <code>SubscriptionCollection</code></a>
        <code>odp:members</code>
        <p>This contains all members that are subscribed to datasets of this server.</p>
        <p>Range: odp:Instance (0..n)</p>
      </dd> 
    </section>

    <pre class="example highlight xml">
      <xmp>
        <odp:SubscriptionCollection>
          <!-- may -->
          <odp:members>
            <odp:instance>
              <odp:identifier>http://www.govdata.de</odp:identifier>
              <odp:endpoint>http://www.govdata.de/odp/api/</odp:endpoint>
            </odp:instance>
          </odp:members>    
      </odp:SubscriptionCollection>          
      </xmp>
    </pre>

  </section>
  
  <section id="communication">
    <h2 role="heading" aria-level="1" id="communication">Communication</h2>
    <p>
    In contrast to [[ActivityPub]] OpenDataPub uses a server-to-server only approach. 
    Whereas [[ActivityPub]] has actor inboxes, these structures are server inboxes in Open DataDataPub.
    </p>
    <p>
    Servers communicate with other servers and propagate information across the open data network by posting datasets to server inbox endpoints. 
    The server inbox endpoints are determinded by a circle of trust list.
    The dataset is the central class, to which all other classes relate, therefore only the datasets MUST be propagated across the network. 
    </p>
    <p>
    In order to propagate updates throughout the open data network, datasets are sent to all recipients in a server's circle of trust and subscription collection.
    The circle of trust is a closed circle in which each member trust the datasets from all other members. The servers MUST therefore store the datasets, so they can be found.
    In contrast to the circle of trust, the SubscribtionCollection is a more loose association. 
    Server B can request to be added to server A's SubscribtionCollection and will then be delivered with the updates regarding all datasets. 
    However, a subscriber in the SubscribtionCollection, like server B, is not trusted to produce legitimate datasets and is therefore not allowed to write back in A's inbox.
    The result is a one-way delivery of datasets.
    </p>

    Delivery is usually triggered by, for example:
    <ul>
        <li>
          an dataset being created in an server's <a href="#outbox">outbox</a>
          with everyone in the circle of trust as the recipient.
        </li>
        <li>
          an dataset being modified in an server's <a href="#outbox">outbox</a>
          with everyone in the circle of trust as the recipient.
        </li>
        <li>
          an dataset being deleted in an server's <a href="#outbox">outbox</a>
          with everyone in the circle of trust as the recipient.
        </li>
    </ul>

  <section id="endpoints">
    <h2 role="heading" aria-level="2" id="endpoints">Endpoints</h2>
    <p>
      Every instance has five endpoints that are needed for the communication. The Endpoint SHOULD be reachable by a central URL like "[baseURL]/api/", but MAY be located anywhere else. 
    </p>
    
    <section>
        <h3 id="endpointinfo">Info</h3>
        <p>The info endpoint MUST output the <code>Instance</code> datatype filled with the information about the instance. With this information the endpoints can be queried and supply additional information in case of an extension.</p>
        <p>The info endpoint is central, because all other endpoints are located nested under his URL. It therefore definies the [endpoint] variable used in this chapter.</p>
        </section>

    <section>
        <h3 id="endpointoutbox">Outbox</h3>
        <p>The outbox is discovered through the info endpoint of an instance. It therefore MUST be located under the URL "[endpoint]/outbox/". The outbox MUST be an <code>OrderedCollection</code>.
          The outbox MAY contain other objects than datasets, but will only deliver them based on the criteria defined in <a href="communication">Communication</a>.</p>
        <p>When the contents of the outbox are up to delivery, the instance MUST determine the recipients of the objects. 
          Datasets MUST be delivered to all instance in the <code>CircleOfTrustCollection</code> as well as the instances in the <code>SubscriptionCollection</code>.
          The instance MUST send them via POST to the inboxes of the instances, which can be derived from their <a href="endpointinfo">Info</a> endpoints.
        </p>
    </section>  

    <section>
    <h3 id="endpointinbox">Inbox</h3>
    <p>The inbox is discovered through the info endpoint of an instance. It therefore MUST be located under the URL "[endpoint]/inbox/". The inbox MUST be an <code>OrderedCollection</code> of <code>datasets</code>.</p>
    <p>It MUST accept POST request with datasets as a payload. This way datasets can be transfered from one instance to another. 
      It MUST also de-duplicate datasets and deny any non-member of its circles of trust to write into its inbox.
      If that happens it SHOULD repond with a HTTP Status 405 Method Not Allowed upon receipt of a POST request.</p>
    </section>    

    <section>
    <h3 id="endpointcircleoftrust">CircleOfTrust</h3>
    <p>The CircleOfTrust is discovered through the info endpoint of an instance. It therefore MUST be located under the URL "[endpoint]/CircleOfTrust/". The circle of trust endpoint MUST output the CircleOfTrustCollection of this instance. The Circle of Trust is supposed to be public, so instances can discover other instances.</p>
    <p>The circle of trust understands three messages. There is a JoinRequest, JoinRequestAnswer und a Leave message. </p>
    <p>For the circle of trust there are two options under which one can operate. The first being a circle of trust, that has a circle leader. This circle leader can decide whether to accept a join request or to deny it on its own without having to ask any other member.</p>
    <img alt="circle of trust join request with a circleleader" src="figures/cot_circleleader.svg">
    <p>In this scenario the new participant, who wants to join the circle sends a Join request to any member of the circle.</p>
    <pre class="example highlight xml">
      <xmp>
      <odp:JoinRequest>
        <!-- must -->
        <odp:instance>
          <odp:identifier>http://www.newinstance.example.com</odp:identifier>
          <odp:endpoint>http://www.newinstance.example.com/odp/api/</odp:endpoint>
        </odp:instance>
        <odp:timeout>P1DT2H</opd:timeout>
      </odp:JoinRequest>          
      </xmp>
    </pre>
    <p>This exact request MUST then send by the instance already in the circle to the CircleOfTrust endpoint of the circle leader. The circle leader can identify this as a new Request by comparing his CircleOfTrustCollection to the request. 
      After deciding on whether to accept or deny the quest the circle leader sends its response, within the time limit set by the sender of the request. 
      If the time of the timeout has run out, the circle leader MUST send a response with a negative isAccepted property and thereby denying the access to the circle of trust.
    </p>
    <pre class="example highlight xml">
      <xmp>
      <odp:JoinRequestAnswer>
        <!-- must -->
        <odp:JoinRequest></odp:JoinRequest>
          <odp:instance>
            <odp:identifier>http://www.newinstance.example.com</odp:identifier>
            <odp:endpoint>http://www.newinstance.example.com/odp/api/</odp:endpoint>
          </odp:instance>
        </odp:JoinRequest>  
        <odp:isAccepted>true</odp:isAccepted>          
      </odp:JoinRequestAnswer>          
      </xmp>
    </pre>
    <p>
      The outcome of the decision is then reflected in the odp:isAccepted property. If the instance is being denied access to the circle, the process is finished. 
      If it accepted, the instance will be added to the CircleOfTrustCollection of the circle leader. The information is then spread across the cirlce of trust by send the JoinRequestAnswer to every instance of the circle of trust.
      If the answer was positive the other instances MUST add the newly accepted instance to their CircleOfTrustCollection.
    </p>
    <p>
      If there is no circle leader, the request has a longer way to g before it can be definitly answered.
    </p>
    <img alt="circle of trust join request without a circleleader" src="figures/cot_no_circleleader.svg">
    <p>
      The JoinRequest is identical, but when the instance in the circle accepts the request from the new participant the instance, which is already a member, takes over the role of the circle leader for this process.
      But instead of deciding on the outcome itself, the instance MUST forward the request to every other instance in the circle. The instances now MUST reply wihtin the set timeout. 
      When there is no decision being made within the timeout, the instance MUST send a response with a negative isAccepted property.
      The instance which acts as the circle leader MUST collect the JoinRequestAnswer message until all messages arrive. The vote is then evaluated by the instance and the answer, in form of a JoinRequestAnswer, MUST then be send to the new participant.
      If the instance acting as a circle leader is the only instance in the circle, it can answer the request on its own.
    </p>
    <img alt="a visualisation of the messageflow in a circle of trust join request without a circleleader" src="figures/cot_no_circleleader_vis.svg">
    </section>

    <section>
    <h3 id="endpointsubscription">Subscription</h3>
    <p>
      The Subscription is discovered through the info endpoint of an instance. It therefore MUST be located under the URL "[endpoint]/Subscription/".
      The Subscription endpoint MUST output the SubscriptionCollection of this instance. 
      Subscribers are public and help with discoverability of the open data network.
    </p>
    <pre class="example highlight xml">
      <xmp>
      <odp:SubscriptionCollection>
        <!-- may -->
        <odp:members>
            <odp:instance>
              <odp:identifier>http://www.govdata.de</odp:identifier>
              <odp:endpoint>http://www.govdata.de/odp/api/</odp:endpoint>
            </odp:instance>
        </odp:members>          
      </odp:JoinRequestAnswer>          
      </xmp>
    </pre>
    <p>
      To get the updates of an instance any instance can send a Subscribe message.
    </p>
    <pre class="example highlight xml">
        <xmp>
        <odp:Subscribe>
          <!-- must -->
          <odp:instance>
            <odp:identifier>http://www.newinstance.example.com</odp:identifier>
            <odp:endpoint>http://www.newinstance.example.com/odp/api/</odp:endpoint>
          </odp:instance>  
        </odp:Subscribe>          
        </xmp>
    </pre>
    <p>
      If the message is answered with a HTTP 200 the instance MUST add the requesting instance to its SubscriptionCollection.
      If the instance denies the addition to the SubscriptionCollection it SHOULD answer with the appropiated error code, i.e. HTTP 409, if the instance is already on the list, or HTTP 429, if the instance is spamming.
    </p>  
    <img alt="subscribe" src="figures/subscribe.svg">
    <p>
      After being added to the SubscriptionCollection of an instance, this instance will send every new dataset to the registered instance.
    </p>
    <p>
      If the instance no longer wants to receive any updates, it can send the Unsubscribe message to remove itself from the SubscriptionCollection.
    </p>
    <pre class="example highlight xml">
      <xmp>
      <odp:Unsubscribe>
        <!-- must -->
        <odp:instance>
          <odp:identifier>http://www.newinstance.example.com</odp:identifier>
          <odp:endpoint>http://www.newinstance.example.com/odp/api/</odp:endpoint>
        </odp:instance>  
      </odp:Unsubscribe>          
      </xmp>
    </pre>
    <p>
      To verify that only the instance can unsubscribe itself, the instance MUST verify that the request is coming from that instance.
    </p>
    <img alt="unsubscribe" src="figures/unsubscribe.svg">
    <p>
        If the message is answered with a HTTP 200 the instance MUST be removed from the SubscriptionCollection.
    </p>
   </section>
    
  </section> 

  <section>
      <h2 role="heading" aria-level="2" id="votes">Votes</h2>
      <p>
        In order to choose a circle leader in a circle of trust that has no leader so far, OpenDataPub needs a robust voting system.
        To avoid re-inventing the wheel a method similar to the VoxPopuli protocol is chosen for the protocol.
      </p>
      <p>
        When an instance wants to vote on a new circle leader, it sends the Vote message. The vote can be either held for a new circle leader or for the removal of an instance from the circle of trust. This is determined by the voteOutcome property.
        The Vote message contains the instance attribute for the node, which the instance wants to be the next circle leader and a unique voteId as well as a timeout.
        The message is being sent to all other instances in the circle. Upon receiving the message every instance has the time definiend in the timeout to send out its own Vote message to every other node, reference the id from the original message.
      </p>
      <pre class="example highlight xml">
        <xmp>
        <odp:Vote>
          <!-- must -->
          <odp:voteId>http://www.instance.example.com/41234</odp:voteId>
          <odp:timeout>P1DT2H</odp:timeout>
          <odp:instance>
            <odp:identifier>http://www.newleader.opendatapub.eu</odp:identifier>
            <odp:endpoint>http://www.newleader.opendatapub.eu/odp/api/</odp:endpoint>
          </odp:instance>  
          <!-- may -->
          <odp:previousId></odp:previousId>
        </odp:Vote>          
        </xmp>
      </pre>
      <p>
        When 100% of the votes are in, the instances send a VoteAcknowledge message to the new circle leader. The decisive property MUST reflect wheter it was a win or a tie. 
        The circle leader responds with a HTTP Status 200 if it came to the same conclusion as the instances, or a HTTP Status 403 if it didn't.
      </p>
      <pre class="example highlight xml">
        <xmp>
        <odp:VoteAcknowledge>
          <!-- must -->
          <odp:instance>
            <odp:identifier>http://www.newleader.opendatapub.eu</odp:identifier>
            <odp:endpoint>http://www.newleader.opendatapub.eu/odp/api/</odp:endpoint>
          </odp:instance>  
          <odp:decisive>true</odp:decisive>
        </odp:VoteAcknowledge>          
        </xmp>
      </pre>
      <p>
        Either way the vote in this case is over and the instances would have to start a new vote. In the case of a timeout with less than 100% of the votes, the vote is canceled as well.
        In the case of a tie, the voting process has to be repeated, but only the two instances from the tie are eligible to be voted for. 
        The instances have to be able to identify, that a vote is a successor to a previous failed vote, which is why in such a case the instances MUST fill the previousId field of the vote for reference.
      </p>
      <img alt="normal voting process" src="figures/vote_normal.svg">
    </section>

  <section>
      <h2 role="heading" aria-level="2" id="dataset-activities">Dataset Activities</h2>
      <p>
        Since the dataset is the central exchange datatype, there needs to be a way to change a once created dataset. OpenDatapub accomplishes that by using dataset activities.
        The activity fields take the value of either 01, for creation, 02, for an update or 03 for deletion. In case of an creating the initial dataset is delivered with all avaible fields.
        A dataset with a update activity 02 MUST only contain the changed fields and not the data that remained the same. This way the traffic is reduced and updates are easily identifiable. 
        For a deletion only the dataset id and the activity SHOULD be provided.
      </p>
  </section>
</section>

  <section>
    <h2 role="heading" aria-level="1" id="messages">Messages</h2>
    <p></p>

    <section id="JoinRequest">
      <h2><dfn id="JoinRequest">JoinRequest</dfn></h2>
      <p>The message has a set of properties, which include:</p>
      <code>
        <code><a href="#Instance">instance</a></code> |
        <code><a href="#dfn-timeout">timeout</a></code>
      </code>
    </section> 
    
    <section id="JoinRequestAnswer">
      <h2><dfn id="JoinRequestAnswer">JoinRequestAnswer</dfn></h2>
      <p>The message has a set of properties, which include:</p>
      <code>
        <code><a href="#Instance">instance</a></code> |
        <code><a href="#dfn-timeout">timeout</a></code> |
        <code><a href="#dfn-isaccepted">isAccepted</a></code>
      </code>
    </section> 

    <section id="Subscribe">
      <h2><dfn id="Subscribe">Subscribe</dfn></h2>
      <p>The message has a set of properties, which include:</p>
      <code>
        <code><a href="#Instance">instance</a></code>
      </code>
    </section> 

    <section id="Unsubscribe">
      <h2><dfn id="Unsubscribe">Unsubscribe</dfn></h2>
      <p>The message has a set of properties, which include:</p>
      <code>
        <code><a href="#Instance">instance</a></code>
      </code>
    </section> 

    <section id="Vote">
      <h2><dfn id="Vote">Vote</dfn></h2>
      <p>The message has a set of properties, which include:</p>
      <code>
        <code><a href="#dfn-voteid">voteid</a></code> |
        <code><a href="#Instance">instance</a></code> |
        <code><a href="#dfn-timeout">timeout</a></code> |
        <code><a href="#dfn-previousid">previousId</a></code> |
        <code><a href="#dfn-voteoutcome">voteOutcome</a></code> |
      </code>
      <p>The previousId property is optional and should be filled if there is a previous vote.</p>
    </section>  

    <section id="VoteAcknowledge">
        <h2><dfn id="VoteAcknowledge">VoteAcknowledge</dfn></h2>
        <p>The message has a set of properties, which include:</p>
        <code>
          <code><a href="#Instance">instance</a></code> |
          <code><a href="#dfn-decisive">decisive</a></code> |
        </code>
      </section> 
  </section>

  <section>
    <h2 role="heading" aria-level="1" id="datatypes">Data Types</h2>
    <p>This section describes OpenDataPub specific data types. There is no particular order to the list.</p>
    <table>
      <thead>
        <tr>
          <th style="width: 15%">Term</th>
          <th colspan="2">Description</th>
          <th>Example</th>
        </tr>
      </thead>

      <tbody>
        <tr>
        <td rowspan="5"><dfn>voteId</dfn></td>
        <td style="width: 10%">URI:</td>
        <td><code>@odp:voteId</code></td>
        <td rowspan="5">
        <div id="exid-jsonld" style="display: block;">
        <pre class="example highlight xml">
            <xmp><odp:voteId>http://example.org/512463</odp:voteId></xmp>
        </pre>
        </div>
          </td>
        </tr>
        <tr>
          <td>Notes:</td>
          <td>
            Provides the globally unique identifier for a vote.
          </td>
        </tr>
        <tr>
          <td>Domain:</td>
          <td><code><a href="#Vote">Vote</a></code></td>
        </tr>
        <tr>
          <td>Range:</td>
          <td><code>anyURI</code></td>
        </tr>
        <tr>
          <td>Functional:</td>
          <td>True</td>
        </tr>

        <tr>
        <td rowspan="5"><dfn>previousId</dfn></td>
        <td style="width: 10%">URI:</td>
        <td><code>@odp:previousId</code></td>
        <td rowspan="5">
        <div id="exid-jsonld" style="display: block;">
        <pre class="example highlight xml">
            <xmp><odp:previousId>http://example.org/512462</odp:previousId></xmp>
        </pre>
        </div>
          </td>
        </tr>
        <tr>
          <td>Notes:</td>
          <td>
            Provides the globally unique identifier for the previous vote.
          </td>
        </tr>
        <tr>
          <td>Domain:</td>
          <td><code><a href="#Vote">Vote</a></code></td>
        </tr>
        <tr>
          <td>Range:</td>
          <td><code>anyURI</code></td>
        </tr>
        <tr>
          <td>Functional:</td>
          <td>True</td>
        </tr>

        <tr>
        <td rowspan="5"><dfn>voteOutcome</dfn></td>
        <td style="width: 10%">URI:</td>
        <td><code>@odp:voteOutcome</code></td>
        <td rowspan="5">
        <div id="exid-jsonld" style="display: block;">
        <pre class="example highlight xml">
            <xmp><odp:voteOutcome>0</odp:voteOutcome></xmp>
        </pre>
        </div>
          </td>
        </tr>
        <tr>
          <td>Notes:</td>
          <td>
            Provides the switch to indicate for what outcome is vote is held for.
          </td>
        </tr>
        <tr>
          <td>Domain:</td>
          <td><code><a href="#Vote">Vote</a></code></td>
        </tr>
        <tr>
          <td>Range:</td>
          <td>
            <code>xsd:nonNegativeInteger</code>
            <p>0 - circle leader</p>
            <p>1 - instance removal </p>
          </td>
        </tr>
        <tr>
          <td>Functional:</td>
          <td>True</td>
        </tr>

        <tr>
        <td rowspan="5"><dfn>decisive</dfn></td>
        <td style="width: 10%">URI:</td>
        <td><code>@odp:decisive</code></td>
        <td rowspan="5">
        <div id="exid-jsonld" style="display: block;">
        <pre class="example highlight xml">
            <xmp><odp:decisive>true</odp:decisive></xmp>
        </pre>
        </div>
          </td>
        </tr>
        <tr>
          <td>Notes:</td>
          <td>
            Provides an indicator to show wheter the vote result was a win or a tie.
          </td>
        </tr>
        <tr>
          <td>Domain:</td>
          <td><code><a href="#VoteAcknowledge">VoteAcknowledge</a></code></td>
        </tr>
        <tr>
          <td>Range:</td>
          <td><code>xsd:boolean</code></td>
        </tr>
        <tr>
          <td>Functional:</td>
          <td>True</td>
        </tr>

        <tr>
        <td rowspan="5"><dfn>timeout</dfn></td>
        <td style="width: 10%">URI:</td>
        <td><code>@odp:timeout</code></td>
        <td rowspan="5">
        <div id="exid-jsonld" style="display: block;">
        <pre class="example highlight xml">
            <xmp><odp:timeout>P1DT2H</odp:timeout></xmp>
        </pre>
        </div>
          </td>
        </tr>
        <tr>
          <td>Notes:</td>
          <td>
            Provides a timeout as a <code>xsd:duration</code>.
          </td>
        </tr>
        <tr>
          <td>Domain:</td>
          <td><code><a href="#Vote">Vote</a></code> | <code><a href="#JoinRequest">JoinRequest</a></code></td>
        </tr>
        <tr>
          <td>Range:</td>
          <td><code>xsd:duration</code></td>
        </tr>
        <tr>
          <td>Functional:</td>
          <td>True</td>
        </tr>

        <tr>
        <td rowspan="5"><dfn>isAccepted</dfn></td>
        <td style="width: 10%">URI:</td>
        <td><code>@odp:isAccepted</code></td>
        <td rowspan="5">
        <div id="exid-jsonld" style="display: block;">
        <pre class="example highlight xml">
            <xmp><odp:isAccepted>true</odp:isAccepted></xmp>
        </pre>
        </div>
          </td>
        </tr>
        <tr>
          <td>Notes:</td>
          <td>
            Provides a answer to the question wheter a JoinRequest is accepted.
          </td>
        </tr>
        <tr>
          <td>Domain:</td>
          <td><code><a href="#JoinRequestAnswer">JoinRequestAnswer</a></code></td>
        </tr>
        <tr>
          <td>Range:</td>
          <td><code>xsd:boolean</code></td>
        </tr>
        <tr>
          <td>Functional:</td>
          <td>True</td>
        </tr>

        <tr>
        <td rowspan="5"><dfn>activity</dfn></td>
        <td style="width: 10%">URI:</td>
        <td><code>@odp:activity</code></td>
        <td rowspan="5">
        <div id="exid-jsonld" style="display: block;">
        <pre class="example highlight xml">
            <xmp><odp:activity>01</odp:activity></xmp>
        </pre>
        </div>
          </td>
        </tr>
        <tr>
          <td>Notes:</td>
          <td>
            Provides an indicator, wheter this is a dataset creation, deletion or an update. See chapter <a href="#dataset-activities">Dataset activities</a>.
          </td>
        </tr>
        <tr>
          <td>Domain:</td>
          <td><code><a href="#Dataset">Dataset</a></code></td>
        </tr>
        <tr>
          <td>Range:</td>
          <td>
            <code>xsd:nonNegativeInteger</code>
            <p>01 - creation</p>
            <p>02 - update</p>
            <p>03 - deletion </p>
          </td>
        </tr>
        <tr>
          <td>Functional:</td>
          <td>True</td>
        </tr>
      </tbody>
      
    </table>
  </section>

  <section id="security-considerations" class="appendix informative">
    <h2>Security Considerations</h2>
    <p>The following cahpters are heavily influenced by [[ActivityPub]], if not adopted completely.</p>

    <section id="authorization">
      <h3>Authentication and Authorization</h3>
      <p>
        OpenDataPub itself does not handle authentication and authorization, but rather recommends to use the existing best practice of authentication desgined for ActivityPub. 
        Instance to instance communication SHOULD be authenticated by using [[HTTP-Signatures]]. Instances MUST be able to identify wheter a message is by the right sender.
      </p>
    </section>
    <section id="security-recursive-objects">
        <h2>Recursive Objects</h2>
        <p>
          Instances should set a limit on how deep to recurse while resolving objects,
          or otherwise specially handle OpenDataPub objects with recursive
          references. Failure to properly do so may result in denial-of-service security vulnerabilities.
        </p>
    </section>
    <section id="security-spam">
        <h2>Spam</h2>
        <p>
          Spam is a problem in any network, perhaps especially so in federated networks.
          While no specific mechanism for combating spam is provided in OpenDataPub, it is recommended that servers filter incoming content
          both by local untrusted users and any remote users through some sort of spam filter.
        </p>
    </section>
    <section id="security-federation-dos">
        <h2>Federation denial-of-service</h2>
          <p>
            Instances should implement protections against denial-of-service attacks from other, federated instances.
            This can be done using, for example, some kind of ratelimiting mechanism.
            Instances should be especially careful to implement this protection around activities that involve side effects.
            Instances SHOULD also take care not to overload servers with submissions, for example by using an exponential backoff strategy.
          </p>
      </section>

    <section id="security-deduplication">
      <h2>De-Duplication</h2>
        <p>
          With the combination of the circle of trust and the subscription, there are cases where duplication can happen.
          Consider the following case:
        </p>
        <img alt="an example where deduplication is needed" src="figures/deduplication.svg">
        <p>
          In this example instance A is in a circle of trust with instance C. 
          But at the same time instance A is subscribed to all changes on instance B, which itself is following C.
          If instance C now publishes the dataset with the id 4711, it gets propagated not only directly from C to A, but also from C to B to A again.
          In this and other cases instance A MUST identify these duplicates and accept the message, but reject any changes from it. 
        </p>
    </section>
  </section>

</body>

</html>
